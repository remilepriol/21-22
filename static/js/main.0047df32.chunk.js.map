{"version":3,"sources":["utils.js","chrome.js","index.js"],"names":["getBounds","image","x","y","top","bottom","height","left","right","width","intersects","otherImage","otherX","otherY","margin","bounds","otherBounds","modulus","n","m","Picto","_ref","name","title","_ref$extension","extension","react_default","a","createElement","src","concat","className","alt","Divider","ZoomButtons","_ref2","onHomeClick","onZoomClick","onShuffleClick","onLanguageClick","onClick","bind","ArrowButtons","_ref3","MenuFilterOption","_ref5","filters","label","onChange","Menu","_ref6","filtersNames","onFilterClick","isMobile","_useState","useState","_useState2","Object","slicedToArray","open","setOpen","_useSpring","useSpring","from","angle","config","duration","filtersList","filter","push","key","web","div","style","interpolate","overflow","target","rel","href","fontSize","padding","verticalAlign","transform","images","shuffle","originalImages","INITIAL_ZOOM","INITIAL_FILTERS","Preface","Eveil","Impulsion","Deploiement","L_agence","Les_clients","Reflexions","FILTERS_NAMES","INITIAL_MAP_POSITION","MARGIN","GRID_SIZE","ZOOM_SPEED_BUTTONS","MIN_ZOOM","HIDE_IMAGES_ZOOM","MAX_ZOOM","MOVE_SPEED","generatePositions","positions","forEach","random","theta","radius","hasIntersection","Math","PI","floor","cos","sin","i","length","position","getImagesParams","imagePositions","mapPosition","zoomLevel","MIDDLE","window","innerWidth","innerHeight","xys","current","display","LegendSpan","cutoff","text","span","s","MobileDetect","navigator","userAgent","mobile","document","getElementById","addEventListener","event","preventDefault","render","useRef","setFilters","_useState3","_useState4","selectedImageIndex","setSelectedImageIndex","_useSprings","useSprings","_useSprings2","propsImages","setImages","useGesture","onDrag","_ref2$vxvy","vxvy","vx","vy","body","cursor","onDragEnd","onPinch","_ref3$previous","previous","previousDistance","_ref3$da","da","distance","zoomSpeed","pow","clamp","onWheel","_ref4","_ref4$delta","delta","yDelta","multiplier","handleZoom","direction","handleZoomToImageIndex","index","imagePos","min","moved","assign","id","onDoubleClick","newIndex","newFilters","fil","map","showImage","value","transformOrigin","backgroundImage","scale","getSourceVariant","opacity","boxShadow","onMouseDown","onMouseMove","onMouseUp","category"],"mappings":"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","file":"static/js/main.0047df32.chunk.js","sourcesContent":["export function randInt(min, max) {\r\n    return Math.floor(Math.random() * (max - min)) + min;\r\n}\r\n\r\nexport function getBounds(image, x, y) {\r\n    return {\r\n        top: y,\r\n        bottom: y + image.height,\r\n        left: x,\r\n        right: x + image.width,\r\n    };\r\n}\r\n\r\nexport function intersects(image, x, y, otherImage, otherX, otherY, margin) {\r\n    const bounds = getBounds(image, x, y);\r\n    const otherBounds = getBounds(otherImage, otherX, otherY);\r\n    return (\r\n        bounds.left - margin < otherBounds.right &&\r\n        bounds.right + margin > otherBounds.left &&\r\n        bounds.top - margin < otherBounds.bottom &&\r\n        bounds.bottom + margin > otherBounds.top\r\n    );\r\n}\r\n\r\nexport function modulus(n, m) {\r\n  return ((n % m) + m) % m;\r\n}","import React, {useState} from \"react\";\r\nimport {animated, useSpring} from \"react-spring\";\r\nimport \"./chrome.css\";\r\n\r\nexport function Picto({name, title, extension = 'svg'}) {\r\n    return <img src={`./icons/${name}.${extension}`} className=\"picto\" alt={title}/>;\r\n}\r\n\r\nexport function Divider() {\r\n    return <img\r\n        src={'icons/ligne-horizontale.svg'}\r\n        className='horizontal-divider'\r\n        alt='divider'\r\n    />\r\n}\r\n\r\nexport function ZoomButtons({onHomeClick, onZoomClick, onShuffleClick, onLanguageClick}) {\r\n    return (\r\n        <div className=\"chrome zoom\">\r\n            <div className=\"chrome-button zoom-home\" onClick={onHomeClick}>\r\n                <Picto name=\"home\" title=\"home\"/>\r\n            </div>\r\n            <Divider/>\r\n            <div className=\"chrome-button zoom-plus\" onClick={onZoomClick.bind(null, 1)}>\r\n                <Picto name=\"plus\" title=\"plus\"/>\r\n            </div>\r\n            <Divider/>\r\n            <div className=\"chrome-button zoom-minus\" onClick={onZoomClick.bind(null, -1)}>\r\n                <Picto name=\"minus\" title=\"minus\"/>\r\n            </div>\r\n            <Divider/>\r\n            <div className=\"chrome-button zoom-shuffle\" onClick={onShuffleClick}>\r\n                <Picto name=\"shuffle\" title=\"shuffle\"/>\r\n            </div>\r\n            {/*<div className=\"chrome-button zoom-language\" onClick={onLanguageClick}>\r\n                En\r\n            </div>*/}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport function ArrowButtons({onClick}) {\r\n    return (\r\n        <div className=\"chrome arrow\">\r\n            <div className=\"chrome-button arrow-left\" onClick={onClick.bind(null, -1)}>\r\n                <Picto name=\"f-gauche\" title=\"left\"/>\r\n            </div>\r\n            <div className=\"chrome-button arrow-right\" onClick={onClick.bind(null, 1)}>\r\n                <Picto name=\"f-droite\" title=\"right\"/>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport function SearchBar({onSearch}) {\r\n    return (\r\n        <div className=\"chrome search\">\r\n            <div className=\"search-input-container\">\r\n                <input\r\n                    type=\"text\"\r\n                    className=\"search-input\"\r\n                    placeholder=\"Client | Année | Projet...\"\r\n                />\r\n            </div>\r\n            <div className=\"chrome-button chrome-button-search\">\r\n                <Picto name=\"loupe\" title=\"search\"/>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction MenuFilterOption({filters, name, label, onChange}) {\r\n    return (\r\n        <div className=\"menu-filters-option\" onClick={onChange.bind(null, name)}>\r\n            <Picto name={filters[name] ? \"carre-plein\" : \"carre-vide\"} extension={\"svg\"}/> {label}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport function Menu({filters, filtersNames, onFilterClick, isMobile}) {\r\n    const [open, setOpen] = useState(!isMobile);\r\n    const {height, width, angle} = useSpring({\r\n        from: {height: 0},\r\n        height: open ? 280 : 0,\r\n        width: !isMobile ? 200 : (open ? 200 : 100),\r\n        angle: open ? 0 : 1,\r\n        config: {duration: 200},\r\n    });\r\n\r\n    const filtersList = [];\r\n    for (let filter in filters) {\r\n        filtersList.push(\r\n            <MenuFilterOption\r\n                filters={filters}\r\n                name={filter}\r\n                key={filter}\r\n                label={filtersNames[filter]}\r\n                onChange={onFilterClick}\r\n            />\r\n        )\r\n    }\r\n\r\n    return (\r\n        <animated.div\r\n            className=\"chrome menu\"\r\n            style={{\r\n                width: width.interpolate(width => `${width}px`),\r\n                overflow: \"hidden\",\r\n            }}\r\n        >\r\n            <img\r\n                src={`./icons/2122-Logo_Cercle.jpg`}\r\n                alt=\"logo cercle\"\r\n                style={{width: '100%'}}\r\n            />\r\n            <animated.div\r\n                style={{\r\n                    height: height.interpolate(height => `${height}px`),\r\n                    overflow: \"hidden\",\r\n                }}\r\n            >\r\n                <Divider/>\r\n                <div\r\n                    className=\"menu-section menu-contact\"\r\n                >\r\n                    <a\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        href=\"mailto:contact@21-22.com\"\r\n                        style = {{fontSize: '14px'}}\r\n                    >\r\n                        contact@21-22.com\r\n                    </a>\r\n                    <a\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        href=\"https://www.linkedin.com/company/vingt-et-un-vingt-deux/\"\r\n                        style={{padding:'10px', verticalAlign:'text-top'}}\r\n                    >\r\n                        <Picto name=\"linkedin\" title=\"LinkedIn\"/>\r\n                    </a>\r\n                    <br/>\r\n                    <a\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        href=\"https://redirection-ecologique.21-22.com/\"\r\n                    >\r\n                        <img\r\n                            src={'icons/bouton_vers_blog.jpg'}\r\n                            alt='Blog'\r\n                            style={{width: '100%'}}\r\n                        />\r\n                    </a>\r\n                </div>\r\n                <Divider/>\r\n                <div className=\"menu-section menu-filters\">\r\n                    {filtersList}\r\n                </div>\r\n            </animated.div>\r\n            <div className=\"menu-collapse\"/>\r\n            <animated.div\r\n                className=\"close-button\"\r\n                onClick={() => setOpen(!open)}\r\n                style={{transform: angle.interpolate(a => `rotate(${a * 180}deg)`)}}\r\n            >\r\n                <Picto name={\"f-haute\"}/>\r\n            </animated.div>\r\n        </animated.div>\r\n    );\r\n}\r\n","import {render} from \"react-dom\";\r\nimport React, {useRef, useState} from \"react\";\r\nimport {animated, useSprings} from \"react-spring\";\r\nimport {useGesture} from \"react-use-gesture\";\r\nimport {clamp, random, shuffle} from \"lodash-es\";\r\nimport MobileDetect from \"mobile-detect\";\r\n\r\nimport {intersects, modulus} from \"./utils\";\r\nimport {ArrowButtons, Menu, ZoomButtons} from \"./chrome\";\r\nimport \"./styles.css\";\r\nimport originalImages from \"./images.json\";\r\n\r\nconst images = shuffle(originalImages);\r\n\r\nconst INITIAL_ZOOM = 0.2;\r\nconst INITIAL_FILTERS = {\r\n    Preface: true,\r\n    Eveil: false,\r\n    Impulsion: false,\r\n    Deploiement: false,\r\n    L_agence: false,\r\n    Les_clients: false,\r\n    Reflexions: false,\r\n};\r\nconst FILTERS_NAMES = {\r\n    Preface: 'Préface',\r\n    Eveil: 'Éveil',\r\n    Impulsion: 'Impulsion',\r\n    Deploiement: 'Déploiement',\r\n    L_agence: \"L'agence\",\r\n    Les_clients: \"Les clients\",\r\n    Reflexions: \"Réflexions\",\r\n}\r\nconst INITIAL_MAP_POSITION = {x: 0, y: 0};\r\n\r\nconst MARGIN = 300;\r\nconst GRID_SIZE = 400;\r\n\r\nconst ZOOM_SPEED_BUTTONS = 1.7;\r\nconst MIN_ZOOM = 0.04;\r\nconst HIDE_IMAGES_ZOOM = 0.1;\r\nconst MAX_ZOOM = 1.3;\r\nconst MOVE_SPEED = 20;\r\n\r\nfunction generatePositions(images, filters) {\r\n    const positions = [];\r\n\r\n    images.forEach(image => {\r\n        if (!filters[image.filter]) {\r\n            // don't compute for images hidden by filters\r\n            positions.push([0, 0]);\r\n            return;\r\n        }\r\n        let x = random(-50, 50) * GRID_SIZE;\r\n        let y = random(-50, 50) * GRID_SIZE;\r\n        let theta = 0;\r\n        let radius = 0;\r\n\r\n        let hasIntersection = true;\r\n\r\n        while (hasIntersection) {\r\n            hasIntersection = false;\r\n            theta += (random(10, 25) / 180) * Math.PI;\r\n            if (theta > Math.PI * 2) {\r\n                radius += 50;\r\n            }\r\n            x = Math.floor(Math.cos(theta) * radius);\r\n            y = Math.floor(Math.sin(theta) * radius);\r\n            for (let i = 0; i < positions.length; i++) {\r\n                let position = positions[i];\r\n                hasIntersection =\r\n                    hasIntersection ||\r\n                    intersects(image, x, y, images[i], position[0], position[1], MARGIN);\r\n            }\r\n        }\r\n\r\n        positions.push([x, y]);\r\n    });\r\n    return positions;\r\n}\r\n\r\n\r\nfunction getImagesParams(imagePositions, mapPosition, zoomLevel, filters) {\r\n    const MIDDLE = {x: window.innerWidth / 2, y: window.innerHeight / 2};\r\n    return i => {\r\n        return {\r\n            xys: [\r\n                MIDDLE.x +\r\n                (imagePositions.current[i][0] + mapPosition.current.x) * zoomLevel.current,\r\n                MIDDLE.y +\r\n                (imagePositions.current[i][1] + mapPosition.current.y) * zoomLevel.current,\r\n                zoomLevel.current,\r\n            ],\r\n            display: filters[images[i].filter] ? \"block\" : \"none\",\r\n        };\r\n    };\r\n}\r\n\r\nfunction LegendSpan({xys, cutoff, text}) {\r\n    return (\r\n        <animated.span\r\n            style={{\r\n                display: xys.interpolate((x, y, s) => (s > cutoff ? \"inline\" : \"none\")),\r\n            }}\r\n        >\r\n            {\" | \"}\r\n            {text}\r\n        </animated.span>\r\n    );\r\n}\r\n\r\nfunction showImage(x, y, s, image, mapPosition) {\r\n    const displayMargin = 50;\r\n    if (x > window.innerWidth + displayMargin) {\r\n        return false;\r\n    }\r\n    if (y > window.innerHeight + displayMargin) {\r\n        return false;\r\n    }\r\n    if (x + image.width * s + displayMargin < 0) {\r\n        return false;\r\n    }\r\n    if (y + image.height * s + displayMargin < 0) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n\r\nfunction getSourceVariant(s, image) {\r\n    let scale;\r\n    if (s > 1) {\r\n        scale = \"@4x\";\r\n    } else if (s > 0.4) {\r\n        scale = \"@3x\";\r\n    } else if (s > 0.1) {\r\n        scale = \"@2x\";\r\n    } else {\r\n        scale = \"@1x\";\r\n    }\r\n    return `url(\"${image.src}${scale}.jpg\")`;\r\n}\r\n\r\nconst isMobile = new MobileDetect(window.navigator.userAgent).mobile();\r\n\r\nfunction Viewpager() {\r\n    const zoomLevel = useRef(INITIAL_ZOOM);\r\n    const mapPosition = useRef(INITIAL_MAP_POSITION);\r\n    const [filters, setFilters] = useState(INITIAL_FILTERS);\r\n    const imagePositions = useRef(generatePositions(images, filters));\r\n    const [selectedImageIndex, setSelectedImageIndex] = useState(null);\r\n\r\n    const [propsImages, setImages] = useSprings(\r\n        images.length,\r\n        getImagesParams(imagePositions, mapPosition, zoomLevel, filters)\r\n    );\r\n\r\n    const bind = useGesture({\r\n        onDrag: ({vxvy: [vx, vy]}) => {\r\n            document.body.style.cursor = \"url('./icons/carre-fleche.svg'), move\";\r\n            mapPosition.current = {\r\n                x: (vx * MOVE_SPEED) / zoomLevel.current + mapPosition.current.x,\r\n                y: (vy * MOVE_SPEED) / zoomLevel.current + mapPosition.current.y,\r\n            };\r\n            setImages(getImagesParams(imagePositions, mapPosition, zoomLevel, filters));\r\n        },\r\n        onDragEnd: () => {\r\n            document.body.style.cursor = \"default\";\r\n        },\r\n        onPinch: ({previous: [previousDistance, previousAngle], da: [distance, angle]}) => {\r\n            if (!isMobile) {\r\n                return;\r\n            }\r\n            const zoomSpeed = Math.pow(distance / previousDistance, 2);\r\n            zoomLevel.current = clamp(zoomLevel.current * zoomSpeed, MIN_ZOOM, MAX_ZOOM);\r\n            setImages(getImagesParams(imagePositions, mapPosition, zoomLevel, filters));\r\n        },\r\n        onWheel: ({delta: [xDelta, yDelta]}) => {\r\n            if (isMobile) {\r\n                return;\r\n            }\r\n            const WIDTH = 10000;\r\n\r\n            const multiplier = 1 - (yDelta * (MAX_ZOOM - MIN_ZOOM)) / WIDTH;\r\n\r\n            zoomLevel.current = clamp(zoomLevel.current * multiplier, MIN_ZOOM, MAX_ZOOM);\r\n            setImages(getImagesParams(imagePositions, mapPosition, zoomLevel, filters));\r\n        },\r\n    });\r\n\r\n    const handleZoom = direction => {\r\n        zoomLevel.current = clamp(\r\n            direction > 0\r\n                ? ZOOM_SPEED_BUTTONS * zoomLevel.current\r\n                : zoomLevel.current / ZOOM_SPEED_BUTTONS,\r\n            MIN_ZOOM,\r\n            MAX_ZOOM\r\n        );\r\n        setImages(getImagesParams(imagePositions, mapPosition, zoomLevel, filters));\r\n    };\r\n\r\n    const handleZoomToImageIndex = index => {\r\n        const imagePos = imagePositions.current[index];\r\n        const image = images[index];\r\n        setSelectedImageIndex(index);\r\n\r\n        zoomLevel.current = Math.min(\r\n            window.innerWidth / (image.width + 20),\r\n            window.innerHeight / (image.height + 200)\r\n        );\r\n\r\n        mapPosition.current = {\r\n            x: -imagePos[0] - image.width / 2,\r\n            y: -imagePos[1] - image.height / 2,\r\n        };\r\n\r\n        setImages(getImagesParams(imagePositions, mapPosition, zoomLevel, filters));\r\n    };\r\n\r\n    let moved = false;\r\n\r\n    return (\r\n        <div {...bind()} id=\"container\" onDoubleClick={handleZoom.bind(null, 1)}>\r\n            <ZoomButtons\r\n                onHomeClick={() => {\r\n                    zoomLevel.current = INITIAL_ZOOM;\r\n                    mapPosition.current = INITIAL_MAP_POSITION;\r\n                    // setFilters(INITIAL_FILTERS);\r\n                    // imagePositions.current = generatePositions(images, INITIAL_FILTERS);\r\n                    setImages(getImagesParams(imagePositions, mapPosition, zoomLevel, filters));\r\n                }}\r\n                onZoomClick={handleZoom}\r\n                onShuffleClick={() => {\r\n                    imagePositions.current = generatePositions(images, filters);\r\n                    setImages(getImagesParams(imagePositions, mapPosition, zoomLevel, filters));\r\n                }}\r\n            />\r\n            <ArrowButtons\r\n                onClick={direction => {\r\n                    let newIndex =\r\n                        selectedImageIndex === null ? 0 : modulus(selectedImageIndex + direction, images.length - 1);\r\n                    while (!filters[images[newIndex].filter]) {\r\n                        newIndex = modulus(newIndex + direction, images.length - 1);\r\n                    }\r\n\r\n                    handleZoomToImageIndex(newIndex);\r\n                }}\r\n            />\r\n            {/*<SearchBar onSearch={() => {}} />*/}\r\n            <Menu\r\n                filters={filters}\r\n                filtersNames={FILTERS_NAMES}\r\n                onFilterClick={filter => {\r\n                    const newFilters = {};\r\n                    for (const fil in filters){\r\n                        newFilters[fil] = false;\r\n                    }\r\n                    newFilters[filter]= true;\r\n                    setFilters(newFilters);\r\n                    setSelectedImageIndex(0);\r\n                    zoomLevel.current = INITIAL_ZOOM;\r\n                    imagePositions.current = generatePositions(images, newFilters);\r\n                    setImages(getImagesParams(imagePositions, mapPosition, zoomLevel, newFilters));\r\n                }}\r\n                isMobile={isMobile}\r\n            />\r\n            {/*<animated.div className=\"debug-info\">\r\n                {propsImages.map(({xys, display}, i) => (\r\n                    <animated.div\r\n                        style={{\r\n                            padding: \"5px\",\r\n                            backgroundColor: xys.interpolate((x, y, s) =>\r\n                                showImage(x, y, s, images[i], mapPosition.current) ? \"blue\" : \"red\"\r\n                            ),\r\n                            flex: 1,\r\n                        }}\r\n                    >\r\n                        {i}\r\n                    </animated.div>\r\n                ))}\r\n            </animated.div>*/}\r\n            <animated.div id=\"map\">\r\n                {propsImages.map(({xys, display}, i) => (\r\n                    <animated.div\r\n                        className=\"image-container\"\r\n                        key={i}\r\n                        style={{\r\n                            display: xys.interpolate((x, y, s) =>\r\n                                showImage(x, y, s, images[i], mapPosition.current)\r\n                                    ? display.value\r\n                                    : \"none\"\r\n                            ),\r\n                            transform: xys.interpolate(\r\n                                (x, y, s) => `translate3d(${x}px,${y}px,0)`\r\n                            ),\r\n                            width: images[i].width * zoomLevel.current,\r\n                            height: images[i].height * zoomLevel.current + 30,\r\n                        }}\r\n                    >\r\n                        <animated.div\r\n                            className=\"image\"\r\n                            style={{\r\n                                width: `${images[i].width}px`,\r\n                                height: `${images[i].height}px`,\r\n                                transform: xys.interpolate((x, y, s) => `scale(${s})`),\r\n                                transformOrigin: \"0 0\",\r\n                                backgroundImage: xys.interpolate((x, y, s) =>\r\n                                    getSourceVariant(s, images[i])\r\n                                ),\r\n                                opacity: xys.interpolate((x, y, s) =>\r\n                                    s > HIDE_IMAGES_ZOOM\r\n                                        ? 1\r\n                                        : s / (HIDE_IMAGES_ZOOM - MIN_ZOOM) - 1\r\n                                ),\r\n                                boxShadow: xys.interpolate(\r\n                                    (x, y, s) => `0 4px ${14 / s}px 0px rgb(208, 208, 208)`\r\n                                ),\r\n                            }}\r\n                            onMouseDown={() => {\r\n                                moved = false;\r\n                            }}\r\n                            onMouseMove={() => {\r\n                                moved = true;\r\n                            }}\r\n                            onMouseUp={() => {\r\n                                if (!moved) {\r\n                                    handleZoomToImageIndex(i);\r\n                                }\r\n                            }}\r\n                        />\r\n                        <animated.div\r\n                            className=\"legend\"\r\n                            style={{\r\n                                position: \"absolute\",\r\n                                top: xys.interpolate((x, y, s) => `${images[i].height * s}px`),\r\n                                width: xys.interpolate(\r\n                                    (x, y, s) =>\r\n                                        `${s > HIDE_IMAGES_ZOOM ? images[i].width * s : 1000}px`\r\n                                ),\r\n                            }}\r\n                        >\r\n                            {images[i].name}\r\n                            <LegendSpan xys={xys} cutoff={0.1}\r\n                                        text={FILTERS_NAMES[images[i].category]}/>\r\n                        </animated.div>\r\n                    </animated.div>\r\n                ))}\r\n            </animated.div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// prevent pinch-to-zoom on Chrome / Firefox OSX\r\ndocument.getElementById(\"root\").addEventListener(\"wheel\", event => {\r\n    event.preventDefault();\r\n});\r\n\r\nrender(<Viewpager/>, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}