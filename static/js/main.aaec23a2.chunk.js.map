{"version":3,"sources":["utils.js","chrome.js","index.js"],"names":["getBounds","image","x","y","top","bottom","height","left","right","width","intersects","otherImage","otherX","otherY","margin","bounds","otherBounds","modulus","n","m","Picto","_ref","name","title","_ref$extension","extension","react_default","a","createElement","src","concat","className","alt","ZoomButtons","_ref2","onHomeClick","onZoomClick","onShuffleClick","onLanguageClick","onClick","bind","ArrowButtons","_ref3","MenuFilterOption","_ref5","filters","label","onChange","Menu","_ref6","filtersNames","onFilterClick","isMobile","_useState","useState","_useState2","Object","slicedToArray","open","setOpen","_useSpring","useSpring","from","angle","config","duration","filtersList","filter","push","key","web","div","style","interpolate","overflow","target","rel","href","transform","images","shuffle","originalImages","INITIAL_ZOOM","INITIAL_FILTERS","Preface","Eveil","Impulsion","Deploiement","L_agence","Les_clients","Reflexions","FILTERS_NAMES","INITIAL_MAP_POSITION","MARGIN","GRID_SIZE","ZOOM_SPEED_BUTTONS","MIN_ZOOM","HIDE_IMAGES_ZOOM","MAX_ZOOM","MOVE_SPEED","generatePositions","positions","forEach","random","theta","radius","hasIntersection","Math","PI","floor","cos","sin","i","length","position","getImagesParams","imagePositions","mapPosition","zoomLevel","MIDDLE","window","innerWidth","innerHeight","xys","current","display","LegendSpan","cutoff","text","span","s","MobileDetect","navigator","userAgent","mobile","document","getElementById","addEventListener","event","preventDefault","render","useRef","setFilters","_useState3","_useState4","selectedImageIndex","setSelectedImageIndex","_useSprings","useSprings","_useSprings2","propsImages","setImages","useGesture","onDrag","_ref2$vxvy","vxvy","vx","vy","body","cursor","onDragEnd","onPinch","_ref3$previous","previous","previousDistance","_ref3$da","da","distance","zoomSpeed","pow","clamp","onWheel","_ref4","_ref4$delta","delta","yDelta","multiplier","handleZoom","direction","handleZoomToImageIndex","index","imagePos","min","moved","assign","id","onDoubleClick","newIndex","console","log","newFilters","objectSpread","defineProperty","map","showImage","value","transformOrigin","backgroundImage","scale","getSourceVariant","opacity","boxShadow","onMouseDown","onMouseMove","onMouseUp","category"],"mappings":"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","file":"static/js/main.aaec23a2.chunk.js","sourcesContent":["export function randInt(min, max) {\n    return Math.floor(Math.random() * (max - min)) + min;\n}\n\nexport function getBounds(image, x, y) {\n    return {\n        top: y,\n        bottom: y + image.height,\n        left: x,\n        right: x + image.width,\n    };\n}\n\nexport function intersects(image, x, y, otherImage, otherX, otherY, margin) {\n    const bounds = getBounds(image, x, y);\n    const otherBounds = getBounds(otherImage, otherX, otherY);\n    return (\n        bounds.left - margin < otherBounds.right &&\n        bounds.right + margin > otherBounds.left &&\n        bounds.top - margin < otherBounds.bottom &&\n        bounds.bottom + margin > otherBounds.top\n    );\n}\n\nexport function modulus(n, m) {\n  return ((n % m) + m) % m;\n}","import React, {useState} from \"react\";\nimport {animated, useSpring} from \"react-spring\";\nimport \"./chrome.css\";\n\n\nexport function Picto({name, title, extension='svg'}) {\n    return <img src={`./icons/${name}.${extension}`} className=\"picto\" alt={title}/>;\n}\n\nexport function ZoomButtons({onHomeClick, onZoomClick, onShuffleClick, onLanguageClick}) {\n    return (\n        <div className=\"chrome zoom\">\n            <div className=\"chrome-button zoom-home\" onClick={onHomeClick}>\n                <Picto name=\"home\" title=\"home\"/>\n            </div>\n            <div className=\"chrome-button zoom-plus\" onClick={onZoomClick.bind(null, 1)}>\n                +\n            </div>\n            <div className=\"chrome-button zoom-minus\" onClick={onZoomClick.bind(null, -1)}>\n                -\n            </div>\n            <div className=\"chrome-button zoom-shuffle\" onClick={onShuffleClick}>\n                <Picto name=\"shuffle\" title=\"shuffle\"/>\n            </div>\n            {/*<div className=\"chrome-button zoom-language\" onClick={onLanguageClick}>\n                En\n            </div>*/}\n        </div>\n    );\n}\n\nexport function ArrowButtons({onClick}) {\n    return (\n        <div className=\"chrome arrow\">\n            <div className=\"chrome-button arrow-left\" onClick={onClick.bind(null, -1)}>\n                <Picto name=\"f-gauche\" title=\"left\"/>\n            </div>\n            <div className=\"chrome-button arrow-right\" onClick={onClick.bind(null, 1)}>\n                <Picto name=\"f-droite\" title=\"right\"/>\n            </div>\n        </div>\n    );\n}\n\nexport function SearchBar({onSearch}) {\n    return (\n        <div className=\"chrome search\">\n            <div className=\"search-input-container\">\n                <input\n                    type=\"text\"\n                    className=\"search-input\"\n                    placeholder=\"Client | Année | Projet...\"\n                />\n            </div>\n            <div className=\"chrome-button chrome-button-search\">\n                <Picto name=\"loupe\" title=\"search\"/>\n            </div>\n        </div>\n    );\n}\n\nfunction MenuFilterOption({filters, name, label, onChange}) {\n    return (\n        <div className=\"menu-filters-option\" onClick={onChange.bind(null, name)}>\n            <Picto name={filters[name] ? \"carre-plein\" : \"carre-vide\"} extension={\"svg\"}/> {label}\n        </div>\n    );\n}\n\nexport function Menu({filters, filtersNames, onFilterClick, isMobile}) {\n    const [open, setOpen] = useState(!isMobile);\n    const {height, angle} = useSpring({\n        from: {height: 0},\n        height: open ? 280 : 0,\n        angle: open ? 1 : 0,\n        config: {duration: 200},\n    });\n\n    const filtersList = [];\n    for (let filter in filters) {\n        filtersList.push(\n            <MenuFilterOption\n                filters={filters}\n                name={filter}\n                key={filter}\n                label={filtersNames[filter]}\n                onChange={onFilterClick}\n            />\n        )\n    }\n\n    return (\n        <div className=\"chrome menu\">\n            <img src={`./icons/2122-Logo_Cercle.jpg`} className=\"logo\" alt=\"logo cercle\"/>\n            <animated.div\n                style={{\n                    height: height.interpolate(height => `${height}px`),\n                    overflow: \"hidden\",\n                }}\n            >\n                <div className=\"menu-section menu-contact\">\n                    <a\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        href=\"mailto:contact@21-22.com\"\n                    >\n                        contact@21-22.com\n                    </a><br/>\n                    <div className=\"menu-social\">\n                        <a\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            href=\"https://www.linkedin.com/company/vingt-et-un-vingt-deux/\"\n                        >\n                            <Picto name=\"linkedin\" title=\"LinkedIn\" />\n                        </a>\n                        <a\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            href=\"https://zei-world.com/fr/pro/2639\"\n                        >\n                            <Picto name=\"zei\" title=\"Zei\" extension={\"png\"}/>\n                        </a>\n                        <a\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            href=\"https://calendly.com/vincent-rabaron/21-22\"\n                        >\n                            <Picto name=\"calendly\" title=\"Calendly\" />\n                        </a>\n                    </div>\n                </div>\n                <div className=\"menu-section menu-filters\">\n                    {filtersList}\n                </div>\n            </animated.div>\n            <div className=\"menu-collapse\"/>\n            <animated.div\n                className=\"close-button\"\n                onClick={() => setOpen(!open)}\n                style={{transform: angle.interpolate(a => `rotate(${a * 180}deg)`)}}\n            >\n                <Picto name={\"f-basse\"}/>\n            </animated.div>\n        </div>\n    );\n}\n","import {render} from \"react-dom\";\nimport React, {useRef, useState} from \"react\";\nimport {animated, useSprings} from \"react-spring\";\nimport {useGesture} from \"react-use-gesture\";\nimport {clamp, random, shuffle} from \"lodash-es\";\nimport MobileDetect from \"mobile-detect\";\n\nimport {intersects, modulus} from \"./utils\";\nimport {ArrowButtons, Menu, ZoomButtons} from \"./chrome\";\nimport \"./styles.css\";\nimport originalImages from \"./images.json\";\n\nconst images = shuffle(originalImages);\n\nconst INITIAL_ZOOM = 0.2;\nconst INITIAL_FILTERS = {\n    Preface: true,\n    Eveil: false,\n    Impulsion: false,\n    Deploiement: false,\n    L_agence: false,\n    Les_clients: false,\n    Reflexions: false,\n};\nconst FILTERS_NAMES = {\n    Preface: 'Préface',\n    Eveil: 'Éveil',\n    Impulsion: 'Impulsion',\n    Deploiement: 'Déploiement',\n    L_agence: \"L'agence\",\n    Les_clients: \"Les clients\",\n    Reflexions: \"Réflexions\",\n}\nconst INITIAL_MAP_POSITION = {x: 0, y: 0};\n\nconst MARGIN = 300;\nconst GRID_SIZE = 400;\n\nconst ZOOM_SPEED_BUTTONS = 1.7;\nconst MIN_ZOOM = 0.04;\nconst HIDE_IMAGES_ZOOM = 0.1;\nconst MAX_ZOOM = 1.3;\nconst MOVE_SPEED = 20;\n\nfunction generatePositions(images, filters) {\n    const positions = [];\n\n    images.forEach(image => {\n        if (!filters[image.filter]) {\n            // don't compute for images hidden by filters\n            positions.push([0, 0]);\n            return;\n        }\n        let x = random(-50, 50) * GRID_SIZE;\n        let y = random(-50, 50) * GRID_SIZE;\n        let theta = 0;\n        let radius = 0;\n\n        let hasIntersection = true;\n\n        while (hasIntersection) {\n            hasIntersection = false;\n            theta += (random(10, 25) / 180) * Math.PI;\n            if (theta > Math.PI * 2) {\n                radius += 50;\n            }\n            x = Math.floor(Math.cos(theta) * radius);\n            y = Math.floor(Math.sin(theta) * radius);\n            for (let i = 0; i < positions.length; i++) {\n                let position = positions[i];\n                hasIntersection =\n                    hasIntersection ||\n                    intersects(image, x, y, images[i], position[0], position[1], MARGIN);\n            }\n        }\n\n        positions.push([x, y]);\n    });\n    return positions;\n}\n\n\nfunction getImagesParams(imagePositions, mapPosition, zoomLevel, filters) {\n    const MIDDLE = {x: window.innerWidth / 2, y: window.innerHeight / 2};\n    return i => {\n        return {\n            xys: [\n                MIDDLE.x +\n                (imagePositions.current[i][0] + mapPosition.current.x) * zoomLevel.current,\n                MIDDLE.y +\n                (imagePositions.current[i][1] + mapPosition.current.y) * zoomLevel.current,\n                zoomLevel.current,\n            ],\n            display: filters[images[i].filter] ? \"block\" : \"none\",\n        };\n    };\n}\n\nfunction LegendSpan({xys, cutoff, text}) {\n    return (\n        <animated.span\n            style={{\n                display: xys.interpolate((x, y, s) => (s > cutoff ? \"inline\" : \"none\")),\n            }}\n        >\n            {\" | \"}\n            {text}\n        </animated.span>\n    );\n}\n\nfunction showImage(x, y, s, image, mapPosition) {\n    const displayMargin = 50;\n    if (x > window.innerWidth + displayMargin) {\n        return false;\n    }\n    if (y > window.innerHeight + displayMargin) {\n        return false;\n    }\n    if (x + image.width * s + displayMargin < 0) {\n        return false;\n    }\n    if (y + image.height * s + displayMargin < 0) {\n        return false;\n    }\n    return true;\n}\n\nfunction getSourceVariant(s, image) {\n    let scale;\n    if (s > 1) {\n        scale = \"@4x\";\n    } else if (s > 0.4) {\n        scale = \"@3x\";\n    } else if (s > 0.1) {\n        scale = \"@2x\";\n    } else {\n        scale = \"@1x\";\n    }\n    return `url(\"${image.src}${scale}.jpg\")`;\n}\n\nconst isMobile = new MobileDetect(window.navigator.userAgent).mobile();\n\nfunction Viewpager() {\n    const zoomLevel = useRef(INITIAL_ZOOM);\n    const mapPosition = useRef(INITIAL_MAP_POSITION);\n    const [filters, setFilters] = useState(INITIAL_FILTERS);\n    const imagePositions = useRef(generatePositions(images, filters));\n    const [selectedImageIndex, setSelectedImageIndex] = useState(null);\n\n    const [propsImages, setImages] = useSprings(\n        images.length,\n        getImagesParams(imagePositions, mapPosition, zoomLevel, filters)\n    );\n\n    const bind = useGesture({\n        onDrag: ({vxvy: [vx, vy]}) => {\n            document.body.style.cursor = \"url('./icons/carre-fleche.svg'), move\";\n            mapPosition.current = {\n                x: (vx * MOVE_SPEED) / zoomLevel.current + mapPosition.current.x,\n                y: (vy * MOVE_SPEED) / zoomLevel.current + mapPosition.current.y,\n            };\n            setImages(getImagesParams(imagePositions, mapPosition, zoomLevel, filters));\n        },\n        onDragEnd: () => {\n            document.body.style.cursor = \"default\";\n        },\n        onPinch: ({previous: [previousDistance, previousAngle], da: [distance, angle]}) => {\n            if (!isMobile) {\n                return;\n            }\n            const zoomSpeed = Math.pow(distance / previousDistance, 2);\n            zoomLevel.current = clamp(zoomLevel.current * zoomSpeed, MIN_ZOOM, MAX_ZOOM);\n            setImages(getImagesParams(imagePositions, mapPosition, zoomLevel, filters));\n        },\n        onWheel: ({delta: [xDelta, yDelta]}) => {\n            if (isMobile) {\n                return;\n            }\n            const WIDTH = 10000;\n\n            const multiplier = 1 - (yDelta * (MAX_ZOOM - MIN_ZOOM)) / WIDTH;\n\n            zoomLevel.current = clamp(zoomLevel.current * multiplier, MIN_ZOOM, MAX_ZOOM);\n            setImages(getImagesParams(imagePositions, mapPosition, zoomLevel, filters));\n        },\n    });\n\n    const handleZoom = direction => {\n        zoomLevel.current = clamp(\n            direction > 0\n                ? ZOOM_SPEED_BUTTONS * zoomLevel.current\n                : zoomLevel.current / ZOOM_SPEED_BUTTONS,\n            MIN_ZOOM,\n            MAX_ZOOM\n        );\n        setImages(getImagesParams(imagePositions, mapPosition, zoomLevel, filters));\n    };\n\n    const handleZoomToImageIndex = index => {\n        const imagePos = imagePositions.current[index];\n        const image = images[index];\n        setSelectedImageIndex(index);\n\n        zoomLevel.current = Math.min(\n            window.innerWidth / (image.width + 20),\n            window.innerHeight / (image.height + 200)\n        );\n\n        mapPosition.current = {\n            x: -imagePos[0] - image.width / 2,\n            y: -imagePos[1] - image.height / 2,\n        };\n\n        setImages(getImagesParams(imagePositions, mapPosition, zoomLevel, filters));\n    };\n\n    let moved = false;\n\n    return (\n        <div {...bind()} id=\"container\" onDoubleClick={handleZoom.bind(null, 1)}>\n            <ZoomButtons\n                onHomeClick={() => {\n                    zoomLevel.current = INITIAL_ZOOM;\n                    mapPosition.current = INITIAL_MAP_POSITION;\n                    setFilters(INITIAL_FILTERS);\n                    imagePositions.current = generatePositions(images, INITIAL_FILTERS);\n                    setImages(getImagesParams(imagePositions, mapPosition, zoomLevel, filters));\n                }}\n                onZoomClick={handleZoom}\n                onShuffleClick={() => {\n                    imagePositions.current = generatePositions(images, filters);\n                    setImages(getImagesParams(imagePositions, mapPosition, zoomLevel, filters));\n                }}\n            />\n            <ArrowButtons\n                onClick={direction => {\n                    let newIndex =\n                        selectedImageIndex === null ? 0 : modulus(selectedImageIndex + direction, images.length - 1);\n                    console.log(newIndex)\n                    while (!filters[images[newIndex].filter]) {\n                        newIndex = modulus(newIndex + direction, images.length - 1);\n                    }\n\n                    handleZoomToImageIndex(newIndex);\n                }}\n            />\n            {/*<SearchBar onSearch={() => {}} />*/}\n            <Menu\n                filters={filters}\n                filtersNames={FILTERS_NAMES}\n                onFilterClick={filter => {\n                    const newFilters = {...filters, [filter]: !filters[filter]};\n                    setFilters(newFilters);\n                    setSelectedImageIndex(0);\n                    zoomLevel.current = INITIAL_ZOOM;\n                    imagePositions.current = generatePositions(images, newFilters);\n                    setImages(getImagesParams(imagePositions, mapPosition, zoomLevel, newFilters));\n                }}\n                isMobile={isMobile}\n            />\n            {/*<animated.div className=\"debug-info\">\n                {propsImages.map(({xys, display}, i) => (\n                    <animated.div\n                        style={{\n                            padding: \"5px\",\n                            backgroundColor: xys.interpolate((x, y, s) =>\n                                showImage(x, y, s, images[i], mapPosition.current) ? \"blue\" : \"red\"\n                            ),\n                            flex: 1,\n                        }}\n                    >\n                        {i}\n                    </animated.div>\n                ))}\n            </animated.div>*/}\n            <animated.div id=\"map\">\n                {propsImages.map(({xys, display}, i) => (\n                    <animated.div\n                        className=\"image-container\"\n                        key={i}\n                        style={{\n                            display: xys.interpolate((x, y, s) =>\n                                showImage(x, y, s, images[i], mapPosition.current)\n                                    ? display.value\n                                    : \"none\"\n                            ),\n                            transform: xys.interpolate(\n                                (x, y, s) => `translate3d(${x}px,${y}px,0)`\n                            ),\n                            width: images[i].width * zoomLevel.current,\n                            height: images[i].height * zoomLevel.current + 30,\n                        }}\n                    >\n                        <animated.div\n                            className=\"image\"\n                            style={{\n                                width: `${images[i].width}px`,\n                                height: `${images[i].height}px`,\n                                transform: xys.interpolate((x, y, s) => `scale(${s})`),\n                                transformOrigin: \"0 0\",\n                                backgroundImage: xys.interpolate((x, y, s) =>\n                                    getSourceVariant(s, images[i])\n                                ),\n                                opacity: xys.interpolate((x, y, s) =>\n                                    s > HIDE_IMAGES_ZOOM\n                                        ? 1\n                                        : s / (HIDE_IMAGES_ZOOM - MIN_ZOOM) - 1\n                                ),\n                                boxShadow: xys.interpolate(\n                                    (x, y, s) => `0 4px ${14 / s}px 0px rgb(208, 208, 208)`\n                                ),\n                            }}\n                            onMouseDown={() => {\n                                moved = false;\n                            }}\n                            onMouseMove={() => {\n                                moved = true;\n                            }}\n                            onMouseUp={() => {\n                                if (!moved) {\n                                    handleZoomToImageIndex(i);\n                                }\n                            }}\n                        />\n                        <animated.div\n                            className=\"legend\"\n                            style={{\n                                position: \"absolute\",\n                                top: xys.interpolate((x, y, s) => `${images[i].height * s}px`),\n                                width: xys.interpolate(\n                                    (x, y, s) =>\n                                        `${s > HIDE_IMAGES_ZOOM ? images[i].width * s : 1000}px`\n                                ),\n                            }}\n                        >\n                            {images[i].name}\n                            <LegendSpan xys={xys} cutoff={0.1}\n                                        text={FILTERS_NAMES[images[i].category]}/>\n                        </animated.div>\n                    </animated.div>\n                ))}\n            </animated.div>\n        </div>\n    );\n}\n\n// prevent pinch-to-zoom on Chrome / Firefox OSX\ndocument.getElementById(\"root\").addEventListener(\"wheel\", event => {\n    event.preventDefault();\n});\n\nrender(<Viewpager/>, document.getElementById(\"root\"));\n"],"sourceRoot":""}